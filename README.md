# hpaas

A secure graphQL/gRPC API for easily deploying applications on Kubernetes with Helm charts

- [API Documentation](https://autom8ter.github.io/hpaas/)

## Features
- [x] gRPC API
- [x] graphQL API
- [x] JWT/OAuth Authentication with remote JWKS verification
- [x] Rego based Authorization policies
- [x] Direct Helm client integration
- [x] Autogenerated Client SDK's
    - [x] Go
    - [x] Javascript
    - [x] PHP
    - [x] Python
    - [x] Ruby
    
## Helpful Links
- [Helm Docs](https://helm.sh/docs/)

## Command Line

```
hpaas -h
Usage of hpaas:
      --config string   path to config file (env: HPAAS_JWKS_URI) (default "hpaas.yaml")
```

## Sample Config


```yaml
# port to serve on. metrics server is started on this port+1
port: 8820
# enable debug logs
debug: true
# rego policy for authorization - this one allows any request
rego_policy: |-
  package hpaas.authz

  default allow = true
# query the allow variable
rego_query: "data.hpaas.authz.allow"
# json web keys uri for authentication
jwks_uri: ""
# add list of helm repos to load at startup
repos:
  - name: "stable"
    url: "https://charts.helm.sh/stable"
```

## Notes

- graphQL API is served on :8820/graphql by default
- gRPC API is served on :8820 by default
- intended to be exposed publicly behind an SSL load balancer/ingress as an alternative to exposing your Kubernetes API