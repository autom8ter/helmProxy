# time is an rfc 3339 timestamp
scalar Time
# Map is a k/v map where the key is a string and the value is any value
scalar Map

input AppInput {
    name: String!
    namespace: String!
    containers: [ContainerInput!]
    replicas: Int
    storage_path: String
    resources: ResourcesInput
}

input ContainerInput {
    name: String!
    image: String!
    env: Map
    ports: Map!
}

input ResourcesInput {
    memory: String
    namespace: String
    storage: String
}

type App {
    name: String!
    namespace: String!
    containers: [Container!]!
    replicas: Int
    storage_path: String
    resources: Resources
}

type Container {
    name: String!
    image: String!
    env: Map
    ports: Map!
}

type Resources {
    memory: String
    namespace: String
    storage: String
}

type Mutation {
    createApp(input: AppInput!): App
    updateApp(input: AppInput!): App
}

type Query {
    getApp(namespace: String!): App
}
